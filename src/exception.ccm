module;

#include <exception>
#include <format>
#include <string>

export module moderna.test_lib:exception;

namespace moderna::test_lib {
  class TestDoesNotExist : public std::exception {
    std::string _message;

  public:
    TestDoesNotExist(const std::string &test_name) {
      _message = std::format("{} does not exist", test_name);
    }
    const char *what() const noexcept {
      return _message.c_str();
    }
  };

  class FailAssertion : public std::exception {
    std::string _message;

  public:
    FailAssertion(std::string &&message) : _message(message) {}
    const char *what() const noexcept {
      return _message.c_str();
    }
    std::string_view msg() const {
      return _message;
    }
  };
}